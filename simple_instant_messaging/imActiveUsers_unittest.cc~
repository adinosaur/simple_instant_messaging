#include "imActiveUsers.h"
#include "gtest/gtest.h"

TEST(IMActiveUsersTest, Add) {
    ImActiveUsers im_active_users;
    EXPECT_TRUE(im_active_users.add("user1"));
    EXPECT_TRUE(im_active_users.add("user2"));
    EXPECT_TRUE(im_active_users.add("user3"));
    EXPECT_FALSE(im_active_users.add("user1"));
    EXPECT_FALSE(im_active_users.add("user2"));
    EXPECT_EQ(im_active_users.size(), 3);
}

TEST(IMActiveUsersTest, Remove) {
    ImActiveUsers im_active_users;
    EXPECT_FALSE(im_active_users.remove("user0"));
    EXPECT_EQ(im_active_users.size(), 0);
    EXPECT_TRUE(im_active_users.add("user1"));
    EXPECT_TRUE(im_active_users.add("user2"));
    EXPECT_TRUE(im_active_users.add("user3"));
    EXPECT_FALSE(im_active_users.remove("user4"));
    EXPECT_EQ(im_active_users.size(), 3);
    EXPECT_TRUE(im_active_users.remove("user3"));
    EXPECT_EQ(im_active_users.size(), 2);
}

TEST(IMActiveUsersTest, GetUserId) {
    ImActiveUsers im_active_users;
    EXPECT_TRUE(im_active_users.add("user1"));
    EXPECT_NE(im_active_users.get_user_id("user1"), -1);
    EXPECT_EQ(im_active_users.get_user_id("user2"), -1);
}

int main(int argc, char **argv) {
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}
